# 小精靈遊戲 (Classic Pac-Man Game)

## 🎯 專案簡介 (Overview)

本專案是一個經典的 **Pac-Man (小精靈)** 遊戲實作。玩家（俗稱小玩家）的目標是在迷宮中吃完所有的小顆粒，同時避開幽靈的追捕。

* **勝利條件**：在一分鐘倒數結束前，吃完迷宮中所有的小顆粒。
* **失敗條件**：被未處於「嚇到狀態」的幽靈碰到，或時間倒數結束時未吃完所有小顆粒。

## 🛠️ 執行環境與操作 (Environment & Operation)

* **開發環境**：Microsoft Visual Studio
* **執行環境**：Chrome 瀏覽器
* **專案檔案**：包含一個 HTML 檔案、一個 JavaScript 檔案和音效 MP3 檔案。

### 玩家操作 (Player Controls)

玩家使用鍵盤控制移動方向：
* **W**：向上移動
* **A**：向左移動
* **S**：向下移動
* **D**：向右移動

---

## 💻 程式實作與核心機制 (Implementation Details)

### 1. 介面與地圖設定 (Interface & Map Setup)

#### 地圖繪製
* **介面設定**：針對介面長寬進行設定。
* **網格處理**：使用雙重迴圈遍歷地圖網格。
* **物件放置**：使用 `switch case` 判斷單元格中的代碼，放置不同的遊戲組件（牆面、小顆粒、障礙物等）。
    * **範例**：若 `case` 為水平牆面，則從左上角開始放置。若 `case` 為小顆粒，則放置於格子中心（`Boundary.width / 2`）。

### 2. 碰撞偵測 (Collision Detection)

碰撞偵測使用 **Padding**（圓形角色的半徑作為緩衝）來偵測圓形角色與方形牆面的碰撞。

* **碰撞偵測原理**：判斷玩家 $x/y$ 座標、半徑及速度與方塊邊界是否重疊。
    * **右碰撞**：玩家 $x$ + 角色半徑 + 角色 $x$ 速度 $\ge$ 方塊 (左側) $x$ - Padding
    * **上碰撞**：玩家 $y$ - 角色半徑 + 角色 $y$ 速度 $\le$ 方塊 (上側) $y$ + 方塊高度 + Padding

#### 撞牆事件
當玩家移動方向偵測到撞牆事件時，該方向的 $x$ 或 $y$ 速度將會**停止**，而其他方向的移動（若有）則維持不變。

### 3. 玩家與幽靈設定 (Player and Ghost Settings)

#### 玩家 (Pac-Man)
* **動畫**：玩家形狀設置為左右開口，移動時嘴巴會一張一合。
* **動作方向改變**：當按下不同的鍵時，改變移動方向。

#### 幽靈 (Ghost)
* **建構**：建立兩隻幽靈實體，設定基礎位置和顏色。
* **嚇到狀態 (Frightened Mode)**：
    * 玩家吃到**超級小顆粒**後，幽靈在 **4 秒內**進入嚇到狀態（顏色改變成藍色）。
    * 在此狀態下，玩家碰到幽靈可使其消失。
* **幽靈移動**：
    * 每移動一步，記錄所有可走（非障礙物）的方向。
    * 如果遇到障礙物，則會選擇可移動方向中路徑與障礙物方向**較不一樣**的方向繼續移動（即探索新路徑）。

### 4. 遊戲流程與計時 (Game Flow and Timer)

* **小顆粒 / 超級小顆粒**：
    * **吃掉**：透過兩圓碰撞偵測判斷是否吃到（兩圓心直線距離 $<$ 兩圓半徑相加）。
    * **得分**：吃掉小顆粒加 10 分，並發出音效。
* **倒計時**：設定倒數 **60 秒**，並在介面上方顯示。
* **結束條件**：
    * **勝利**：玩家吃完所有小顆粒。
    * **失敗**：倒計時結束，或未被嚇到的幽靈碰到玩家。
    * **結束顯示**：停止動畫並根據勝利/失敗顯示不同訊息。

---